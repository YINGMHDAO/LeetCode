------

# æˆåŠŸçš„å’’è¯­å’Œè¯æ°´ç»„åˆå¯¹

## ğŸ“Œ é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªæ­£æ•´æ•°æ•°ç»„ `spells` å’Œ `potions`ï¼Œåˆ†åˆ«è¡¨ç¤ºå’’è¯­çš„å¼ºåº¦å’Œè¯æ°´çš„å¼ºåº¦ï¼Œä»¥åŠä¸€ä¸ªæ­£æ•´æ•° `success` è¡¨ç¤ºæˆåŠŸé˜ˆå€¼ã€‚

å¦‚æœ `spells[i] * potions[j] >= success`ï¼Œé‚£ä¹ˆè¿™å¯¹ `(i, j)` ç»„åˆè§†ä¸º**æˆåŠŸ**ã€‚è¦æ±‚è¿”å›ä¸€ä¸ªæ•°ç»„ `pairs`ï¼Œå…¶ä¸­ `pairs[i]` è¡¨ç¤º `spells[i]` èƒ½å¤Ÿç»„æˆçš„æˆåŠŸç»„åˆæ•°ã€‚

------

## ğŸ§  è§£æ³•ä¸€ï¼šæš´åŠ›æšä¸¾ï¼ˆåµŒå¥—å¾ªç¯ï¼‰

```java
public int[] successfulPairs(int[] spells, int[] potions, long success) {
    int n = spells.length;
    int m = potions.length;
    int[] result = new int[n];

    for (int i = 0; i < n; i++) {
        int count = 0;
        for (int j = 0; j < m; j++) {
            if ((long) spells[i] * potions[j] >= success) {
                count++;
            }
        }
        result[i] = count;
    }

    return result;
}
```

### âœ… ä¼˜ç‚¹ï¼š

- å®ç°ç®€å•ï¼Œç›´è§‚æ˜“æ‡‚

### âŒ ç¼ºç‚¹ï¼š

- æ—¶é—´å¤æ‚åº¦ä¸º `O(n * m)`ï¼Œåœ¨æ•°æ®è§„æ¨¡è¾ƒå¤§æ—¶ä¼šè¶…æ—¶
- å®¹æ˜“å‘ç”Ÿæ•´æ•°æº¢å‡ºï¼Œéœ€è¦æ˜¾å¼è½¬ä¸º `long`

------

## ğŸš€ è§£æ³•äºŒï¼šæ’åº + äºŒåˆ†æŸ¥æ‰¾ï¼ˆæ¨èè§£æ³•ï¼‰

### æ ¸å¿ƒæ€æƒ³ï¼š

- å°† `potions` æ’åº
- å¯¹æ¯ä¸ª `spell` ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æœ€å°çš„ `potions[j]`ï¼Œä½¿å¾— `spell * potions[j] >= success`
- å‰©ä¸‹çš„è¯æ°´éƒ½å¯ä»¥ä¸è¯¥ `spell` ç»„åˆæˆåŠŸ

```java
public int[] successfulPairs(int[] spells, int[] potions, long success) {
    int n = spells.length, m = potions.length;
    int[] result = new int[n];
    Arrays.sort(potions);

    for (int i = 0; i < n; i++) {
        int left = 0, right = m;
        while (left < right) {
            int mid = left + (right - left) / 2;
            if ((long) spells[i] * potions[mid] < success) {
                left = mid + 1;
            } else {
                right = mid;
            }
        }
        result[i] = m - left;
    }

    return result;
}
```

### âœ… ä¼˜ç‚¹ï¼š

- æ—¶é—´å¤æ‚åº¦ä¸º `O(n log m + m log m)`ï¼Œé€‚åˆå¤§æ•°æ®é‡
- é€»è¾‘æ¸…æ™°ï¼ŒæŸ¥æ‰¾æ•ˆç‡é«˜

### â—æ³¨æ„ï¼š

- `spells[i] * potions[j]` è¦ç”¨ `long` é˜²æ­¢æº¢å‡º

------

## âš¡ è§£æ³•ä¸‰ï¼šæ’åº + åŒæŒ‡é’ˆï¼ˆæ€§èƒ½è¾ƒå¥½ï¼‰

### æ ¸å¿ƒæ€æƒ³ï¼š

- æ’åº `spells` å¹¶è®°å½•åŸç´¢å¼•
- æ’åº `potions`
- åŒæŒ‡é’ˆä» `potions` æœ€å¤§å€¼å‘å‰æ»‘åŠ¨ï¼Œé€æ­¥ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ•°é‡
- æœ€åå°†ç»“æœå¡«å›åŸå§‹é¡ºåº

```java
public int[] successfulPairs(int[] spells, int[] potions, long success) {
    int n = spells.length, m = potions.length;
    int[] result = new int[n];
    int[][] spellPairs = new int[n][2];

    for (int i = 0; i < n; i++) {
        spellPairs[i][0] = spells[i];
        spellPairs[i][1] = i;
    }

    Arrays.sort(spellPairs, (a, b) -> Integer.compare(a[0], b[0]));
    Arrays.sort(potions);

    int j = m - 1;
    for (int i = 0; i < n; i++) {
        int spell = spellPairs[i][0];
        int index = spellPairs[i][1];

        while (j >= 0 && (long) spell * potions[j] >= success) {
            j--;
        }

        result[index] = m - (j + 1);
    }

    return result;
}
```

### âœ… ä¼˜ç‚¹ï¼š

- æ—¶é—´å¤æ‚åº¦ `O(n log n + m log m)`
- æŒ‡é’ˆåªéœ€çº¿æ€§ç§»åŠ¨ä¸€æ¬¡ï¼Œè¿è¡Œæ•ˆç‡é«˜
- å®é™…æ€§èƒ½å¯èƒ½æ¯”äºŒåˆ†æŸ¥æ‰¾æ›´å¥½ï¼ˆCache å‹å¥½ï¼‰

------

## ğŸ“Œ æ€»ç»“å¯¹æ¯”

| è§£æ³•     | æ—¶é—´å¤æ‚åº¦             | æ˜¯å¦éœ€è¦æ’åº           | æ˜¯å¦æ˜“æº¢å‡º      | æ˜¯å¦æ¨è |
| -------- | ---------------------- | ---------------------- | --------------- | -------- |
| æš´åŠ›æšä¸¾ | `O(n * m)`             | å¦                     | æ˜¯              | âŒ        |
| äºŒåˆ†æŸ¥æ‰¾ | `O(n log m + m log m)` | æ˜¯ï¼ˆpotionsï¼‰          | æ˜¯ï¼ˆéœ€è½¬ longï¼‰ | âœ…âœ…âœ…      |
| åŒæŒ‡é’ˆ   | `O(n log n + m log m)` | æ˜¯ï¼ˆspells + potionsï¼‰ | æ˜¯ï¼ˆéœ€è½¬ longï¼‰ | âœ…âœ…âœ…      |

------

## ğŸ›  æç¤º

- é‡åˆ°ä¹˜æ³•åˆ¤æ–­æ—¶ï¼Œ**å§‹ç»ˆæ³¨æ„æ˜¯å¦æœ‰æº¢å‡ºé£é™©**ï¼Œå»ºè®®ç»Ÿä¸€è½¬ä¸º `long`
- æ’åº+åŒæŒ‡é’ˆæˆ–äºŒåˆ†æŸ¥æ‰¾æ˜¯å¤„ç†ä¹˜ç§¯/èŒƒå›´é—®é¢˜çš„å¸¸è§å¥—è·¯

