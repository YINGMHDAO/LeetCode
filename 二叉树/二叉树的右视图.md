------

# äºŒå‰æ ‘å³è§†å›¾

## ğŸ§© é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼Œè¿”å›ä»é¡¶éƒ¨åˆ°åº•éƒ¨æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ï¼ˆå³æ¯ä¸€å±‚çš„æœ€å³è¾¹èŠ‚ç‚¹ï¼‰ã€‚

------

## ğŸ“Œ ç¤ºä¾‹

è¾“å…¥ï¼š

```
      1
     / \
    2   3
     \   \
      5   4
```

è¾“å‡ºï¼š

```
[1, 3, 4]
```

------

## âœ… è§£æ³•ä¸€ï¼šBFS å±‚åºéå†ï¼ˆæ¨èï¼‰

### ğŸ’¡ æ€è·¯ï¼š

- ä½¿ç”¨é˜Ÿåˆ—è¿›è¡Œå±‚åºéå†ï¼›
- æ¯å±‚éå†æ—¶è®°å½•æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå³å³è§†å›¾ï¼‰ï¼›
- å¯ä»¥é€šè¿‡åœ¨ `for` å¾ªç¯ä¸­åˆ¤æ–­ `i == size - 1` æ¥è¯†åˆ«æ¯å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼›
- ä¹Ÿå¯ä»¥ä¼˜åŒ–ä¸ºåœ¨æ¯å±‚éå†å®Œæˆåä½¿ç”¨ `peekLast()` è·å–ä¸‹ä¸€å±‚æœ€å³è¾¹çš„èŠ‚ç‚¹ã€‚

------

### âœ… æ ‡å‡† BFS å®ç°ï¼š

```java
class Solution {
    public List<Integer> rightSideView(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        if (root == null) return result;
        Deque<TreeNode> deque = new ArrayDeque<>();
        deque.offer(root);

        while (!deque.isEmpty()) {
            int size = deque.size();
            for (int i = 0; i < size; i++) {
                TreeNode curr = deque.poll();
                if (curr.left != null) deque.offer(curr.left);
                if (curr.right != null) deque.offer(curr.right);
                if (i == size - 1) result.add(curr.val); // æœ¬å±‚æœ€åä¸€ä¸ªèŠ‚ç‚¹
            }
        }
        return result;
    }
}
```

------

### ğŸ”„ ä¼˜åŒ–å®ç°ï¼ˆä½¿ç”¨ `peekLast()`ï¼‰ï¼š

```java
class Solution {
    public List<Integer> rightSideView(TreeNode root) {
        if (root == null)
            return new ArrayList<>();
        Deque<TreeNode> deque = new ArrayDeque<>();
        List<Integer> result = new ArrayList<>();
        deque.offerLast(root);
        result.add(root.val);
        while (!deque.isEmpty()) {
            int l = deque.size();
            for (int i = 0; i < l; i++) {
                TreeNode curr = deque.pollFirst();
                if (curr != null) {
                    if (curr.left != null) deque.offerLast(curr.left);
                    if (curr.right != null) deque.offerLast(curr.right);
                }
            }
            // è®°å½•ä¸‹ä¸€å±‚æœ€å³ä¾§èŠ‚ç‚¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            if (!deque.isEmpty()) {
                TreeNode right = deque.peekLast();
                if (right != null)
                    result.add(right.val);
            }
        }
        return result;
    }
}
```

------

## âš ï¸ æ³¨æ„äº‹é¡¹

- `deque.peekLast()` çš„å€¼æ˜¯å½“å‰é˜Ÿåˆ—ä¸­æœ€æœ«å°¾çš„å…ƒç´ ï¼Œå³ **ä¸‹ä¸€å±‚æœ€å³è¾¹èŠ‚ç‚¹**ï¼›
- åœ¨æ·»åŠ å…¶å€¼å‰åº”åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œä»¥é¿å…é‡å¤æˆ–é”™è¯¯æ·»åŠ ï¼›
- BFS æ˜¯å¤„ç†è¯¥é—®é¢˜æœ€ç›´è§‚ã€æ˜“ç†è§£çš„æ–¹å¼ï¼›
- ä¹Ÿå¯ä»¥ä½¿ç”¨ DFS + å±‚æ•°è®°å½•æ¥å®ç°ï¼ˆé€‚åˆç»ƒä¹ é€’å½’æ·±åº¦æ§åˆ¶ï¼‰ã€‚

------

## ğŸ“ˆ æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œæ¯ä¸ªèŠ‚ç‚¹éå†ä¸€æ¬¡ï¼›
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ï¼Œé˜Ÿåˆ—åœ¨æœ€åæƒ…å†µä¸‹ä¼šå­˜å‚¨ä¸€æ•´å±‚çš„èŠ‚ç‚¹ã€‚

------

## âœ… æ€»ç»“

| æ–¹æ³•               | æ˜¯å¦æ¨è | ç‰¹ç‚¹                           |
| ------------------ | -------- | ------------------------------ |
| BFS + `i==size-1`  | âœ… æ¨è   | ç¨³å®šï¼Œé€»è¾‘æ¸…æ™°ï¼Œé€‚åˆåˆå­¦è€…     |
| BFS + `peekLast()` | âœ… æ¨è   | ç®€æ´ï¼Œå†™æ³•ä¼˜é›…ï¼Œæ³¨æ„ç©ºé˜Ÿåˆ—åˆ¤æ–­ |
| DFS + æ·±åº¦ä¼˜å…ˆ     | âš ï¸ å¯é€‰   | æ§åˆ¶é€»è¾‘ç¨å¤æ‚ï¼Œé€‚åˆè¿›é˜¶ç»ƒä¹    |

