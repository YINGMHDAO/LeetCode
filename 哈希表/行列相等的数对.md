------

# è¡Œåˆ—ç›¸ç­‰çš„æ•°å¯¹

## ğŸ§© é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹ã€å¤§å°ä¸º `n x n` çš„æ•´æ•°çŸ©é˜µ `grid`ï¼Œè¿”å›æ»¡è¶³ `Ri` è¡Œå’Œ `Cj` åˆ—ç›¸ç­‰çš„è¡Œåˆ—å¯¹ `(Ri, Cj)` çš„æ•°ç›®ã€‚

å¦‚æœè¡Œå’Œåˆ—ä»¥ç›¸åŒçš„é¡ºåºåŒ…å«ç›¸åŒçš„å…ƒç´ ï¼ˆå³ç›¸ç­‰çš„æ•°ç»„ï¼‰ï¼Œåˆ™è®¤ä¸ºäºŒè€…æ˜¯ç›¸ç­‰çš„ã€‚

------

## âœ… è§£é¢˜æ€è·¯

1. å°†æ¯ä¸€è¡Œè½¬æ¢ä¸ºä¸€ä¸ªæ˜“äºæ¯”è¾ƒçš„å½¢å¼ï¼Œä½œä¸º key å­˜å…¥å“ˆå¸Œè¡¨ä¸­ï¼Œè®°å½•å…¶å‡ºç°æ¬¡æ•°ã€‚
2. éå†æ¯ä¸€åˆ—ï¼ŒåŒæ ·è½¬æ¢ä¸ºåŒæ ·çš„å½¢å¼ï¼Œç„¶ååœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åŒ¹é…çš„è¡Œã€‚

------

## âŒ åˆå§‹è§£æ³•ï¼ˆå­˜åœ¨æ½œåœ¨ bugï¼‰

```java
class Solution {
    public int equalPairs(int[][] grid) {
        int count = 0;
        Map<List<Integer>, Integer> listMap = new HashMap<>();
        for (int[] row : grid) {
            List<Integer> list = Arrays.stream(row).boxed().collect(Collectors.toList());
            listMap.put(list, listMap.getOrDefault(list, 0) + 1);
        }
        for (int i = 0; i < grid[0].length; i++) {
            List<Integer> list = new ArrayList<>();
            for (int j = 0; j < grid.length; j++) {
                list.add(grid[j][i]);
            }
            count += listMap.getOrDefault(list, 0);
        }
        return count;
    }
}
```

### ğŸš¨ é—®é¢˜åˆ†æ

è™½ç„¶ `List<Integer>` åœ¨é€»è¾‘ä¸Šæ˜¯å€¼ç›¸ç­‰çš„å°±å¯ä»¥ä½œä¸º key ä½¿ç”¨ï¼Œä½†åœ¨ä½¿ç”¨ `new ArrayList<>()` æ„é€ åˆ—æ—¶ï¼Œå®ƒçš„å†…å­˜åœ°å€ä¸åŒï¼Œå¯èƒ½å¯¼è‡´ `Map.get()` æ— æ³•æ­£ç¡®åŒ¹é…ã€‚

------

## âœ… æ¨èè§£æ³•ï¼šä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸º key

```java
class Solution {
    public int equalPairs(int[][] grid) {
        int n = grid.length;
        int count = 0;
        Map<String, Integer> map = new HashMap<>();

        // å­˜å‚¨æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²å½¢å¼
        for (int[] row : grid) {
            String key = Arrays.toString(row);
            map.put(key, map.getOrDefault(key, 0) + 1);
        }

        // æ„é€ æ¯ä¸€åˆ—å¹¶æŸ¥æ‰¾åŒ¹é…
        for (int col = 0; col < n; col++) {
            int[] colArray = new int[n];
            for (int row = 0; row < n; row++) {
                colArray[row] = grid[row][col];
            }
            String key = Arrays.toString(colArray);
            count += map.getOrDefault(key, 0);
        }

        return count;
    }
}
```

------

## â±ï¸ æ—¶é—´å¤æ‚åº¦åˆ†æ

- è¡Œå’Œåˆ—éå†å„ä¸€æ¬¡ï¼šO(nÂ²)
- æ¯æ¬¡æ„é€  key çš„æ—¶é—´ï¼šO(n)
- æ€»ä½“æ—¶é—´å¤æ‚åº¦ï¼š**O(nÂ²)**
- ç©ºé—´å¤æ‚åº¦ï¼š**O(nÂ²)**ï¼ˆç”¨äºå­˜å‚¨æ‰€æœ‰å”¯ä¸€çš„è¡Œï¼‰

------

## ğŸ“ æ€»ç»“

- ä½¿ç”¨ `List<Integer>` åš key è™½ç„¶é€»è¾‘ä¸Šå¯è¡Œï¼Œä½†å­˜åœ¨å®é™…åŒ¹é…ä¸ä¸€è‡´çš„ bugã€‚
- ä½¿ç”¨ `String` æˆ–ä¸å¯å˜å¯¹è±¡ä½œä¸º key æ›´ç¨³å®šå¯é ã€‚
- é¢˜ç›®è€ƒæŸ¥äº†**å“ˆå¸Œè¡¨æ˜ å°„æŠ€å·§**ã€**äºŒç»´çŸ©é˜µè¡Œåˆ—è½¬æ¢**ï¼Œé€‚åˆåˆä¸­çº§ç®—æ³•è®­ç»ƒã€‚

------