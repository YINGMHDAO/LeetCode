------

# åˆ¤æ–­æ˜¯å¦ä¸ºå­åºåˆ— & Java Map å‡½æ•°å¼ç”¨æ³•

------

## âœ¨ é¢˜ç›®ï¼šåˆ¤æ–­å­—ç¬¦ä¸² `s` æ˜¯å¦ä¸ºå­—ç¬¦ä¸² `t` çš„å­åºåˆ—

**å®šä¹‰**ï¼š
 å­—ç¬¦ä¸²çš„å­åºåˆ—æ˜¯é€šè¿‡åˆ é™¤ä¸€äº›ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰å­—ç¬¦ï¼Œä¸æ”¹å˜å…¶ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®å¾—åˆ°çš„æ–°å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹**ï¼š

- `"ace"` æ˜¯ `"abcde"` çš„å­åºåˆ—
- `"aec"` ä¸æ˜¯ `"abcde"` çš„å­åºåˆ—

------

## âœ… æˆ‘çš„åŸå§‹è§£æ³•ä»£ç ï¼ˆå•ä¸ª `s` ä¸ `t` æ¯”è¾ƒï¼‰

```java
class Solution {
    public boolean isSubsequence(String s, String t) {
        if (s.length() == 0) {
            return true;
        }
        if (t.length() == 0) {
            return false;
        }
        int son = 0;
        for (int i = 0; i < t.length(); i++) {
            if (t.charAt(i) == s.charAt(son)) {
                son++;
            }
            if (son > s.length() - 1) {
                return true;
            }
        }
        return false;
    }
}
```

------

## ğŸ” è¿›é˜¶é—®é¢˜ï¼šå¦‚æœæœ‰å¤§é‡çš„ `s`ï¼ˆå¦‚åäº¿ä¸ªï¼‰ï¼Œæ¯ä¸ªéƒ½è¦åˆ¤æ–­æ˜¯å¦ä¸º `t` çš„å­åºåˆ—ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ

### ğŸ§  ä¼˜åŒ–æ€è·¯

- å¯¹ `t` è¿›è¡Œä¸€æ¬¡**é¢„å¤„ç†**ï¼Œå°†å…¶ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ‰€æœ‰ä½ç½®è®°å½•ä¸‹æ¥ã€‚
- æ¯æ¬¡åˆ¤æ–­ `s` æ˜¯å¦ä¸º `t` çš„å­åºåˆ—æ—¶ï¼Œä½¿ç”¨ **äºŒåˆ†æŸ¥æ‰¾** æ‰¾åˆ°å­—ç¬¦åœ¨ `t` ä¸­å‡ºç°çš„ä¸‹ä¸€ä¸ªåˆæ³•ä½ç½®ã€‚

### âœ… ä¼˜åŒ–ä»£ç å®ç°

```java
class Solution {
    private Map<Character, List<Integer>> indexMap;

    public Solution(String t) {
        indexMap = new HashMap<>();
        for (int i = 0; i < t.length(); i++) {
            char c = t.charAt(i);
            indexMap.computeIfAbsent(c, k -> new ArrayList<>()).add(i);
        }
    }

    public boolean isSubsequence(String s) {
        int prevIndex = -1;
        for (char c : s.toCharArray()) {
            if (!indexMap.containsKey(c)) return false;
            List<Integer> list = indexMap.get(c);
            int nextIndex = findNextIndex(list, prevIndex);
            if (nextIndex == -1) return false;
            prevIndex = nextIndex;
        }
        return true;
    }

    private int findNextIndex(List<Integer> list, int target) {
        int left = 0, right = list.size() - 1;
        int result = -1;
        while (left <= right) {
            int mid = (left + right) / 2;
            if (list.get(mid) > target) {
                result = list.get(mid);
                right = mid - 1;
            } else {
                left = mid + 1;
            }
        }
        return result;
    }
}
```

------

## ğŸ§° é‡ç‚¹æ–¹æ³•è¯¦è§£ï¼š`computeIfAbsent`

### ğŸ“Œ è¯­æ³•ï¼š

```java
V computeIfAbsent(K key, Function<? super K, ? extends V> mappingFunction)
```

### âœ… ç”¨æ³•è¯´æ˜ï¼š

- å¦‚æœ `map` ä¸­æ²¡æœ‰ key å¯¹åº”çš„å€¼ï¼Œå°±ç”¨ `mappingFunction` åˆ›å»ºä¸€ä¸ªã€‚
- å¦åˆ™ç›´æ¥è¿”å›å·²æœ‰çš„å€¼ã€‚

### ğŸ” ç¤ºä¾‹ï¼š

```java
map.computeIfAbsent(c, k -> new ArrayList<>()).add(i);
```

ç­‰ä»·äºï¼š

```java
if (!map.containsKey(c)) {
    map.put(c, new ArrayList<>());
}
map.get(c).add(i);
```

------

## ğŸ“š Java ä¸­ `Map` çš„å¸¸ç”¨å‡½æ•°å¼æ–¹æ³•

| æ–¹æ³•å                                           | ä½œç”¨                                  |
| ------------------------------------------------ | ------------------------------------- |
| `getOrDefault(key, defaultValue)`                | è·å– key å¯¹åº”çš„å€¼ï¼Œä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼ |
| `putIfAbsent(key, value)`                        | key ä¸å­˜åœ¨æ—¶æ’å…¥                      |
| `computeIfAbsent(key, k -> newVal)`              | key ä¸å­˜åœ¨æ—¶ç”Ÿæˆå¹¶æ’å…¥æ–°å€¼            |
| `computeIfPresent(key, (k, v) -> newVal)`        | key å­˜åœ¨æ—¶æ›´æ–°å€¼                      |
| `compute(key, (k, v) -> newVal)`                 | æ€»æ˜¯æ‰§è¡Œå‡½æ•°ï¼Œnull å¯åˆ é™¤             |
| `merge(key, val, (oldVal, newVal) -> mergedVal)` | åˆå¹¶æ–°æ—§å€¼ï¼Œé€‚åˆé¢‘ç‡ç»Ÿè®¡              |
| `forEach((k, v) -> {...})`                       | éå†é”®å€¼å¯¹                            |

------

## ğŸ“Œ ç¤ºä¾‹ï¼šé¢‘ç‡ç»Ÿè®¡

```java
Map<Character, Integer> freq = new HashMap<>();
String text = "banana";

for (char c : text.toCharArray()) {
    freq.merge(c, 1, Integer::sum);
}
```

------

## âœ… å°ç»“

- è‹¥å¤„ç†å°‘é‡ `s` ä¸ `t` çš„æ¯”è¾ƒï¼ŒåŒæŒ‡é’ˆå³å¯ã€‚
- è‹¥ `s1 ~ sk` å¾ˆå¤šï¼Œè€Œ `t` å›ºå®šï¼Œåº”å¯¹ `t` é¢„å¤„ç†å¹¶ç”¨äºŒåˆ†åŠ é€ŸåŒ¹é…ã€‚
- Java 8+ çš„å‡½æ•°å¼ Map æ–¹æ³•ï¼ˆå¦‚ `computeIfAbsent`, `merge`ï¼‰èƒ½å¤§å¹…ç®€åŒ–ä»£ç é€»è¾‘å’Œæé«˜å¯è¯»æ€§ã€‚

------

