------

# å­—ç¬¦æ•°ç»„å‹ç¼©

## ğŸ“Œ é—®é¢˜æè¿°

ç»™å®šä¸€ä¸ªå­—ç¬¦æ•°ç»„ `chars`ï¼Œéœ€è¦è¿›è¡ŒåŸåœ°å‹ç¼©ã€‚å‹ç¼©è§„åˆ™å¦‚ä¸‹ï¼š

- å¯¹äº `chars` ä¸­è¿ç»­ç›¸åŒçš„å­—ç¬¦ï¼Œè®°ä¸ºä¸€ç»„ã€‚
- å¦‚æœæŸç»„é•¿åº¦ä¸º 1ï¼Œåˆ™ç›´æ¥ä¿ç•™è¯¥å­—ç¬¦ã€‚
- å¦‚æœæŸç»„é•¿åº¦å¤§äº 1ï¼Œåˆ™åœ¨è¯¥å­—ç¬¦åé¢è¿½åŠ è¯¥ç»„çš„é•¿åº¦ï¼ˆè½¬ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼‰ã€‚
- ç»“æœéœ€åŸåœ°å†™å…¥ `chars` ä¸­ï¼Œä¸”ä½¿ç”¨ **å¸¸é‡é¢å¤–ç©ºé—´**ã€‚
- æœ€ç»ˆè¿”å› `chars` çš„æ–°é•¿åº¦ã€‚

### ç¤ºä¾‹

| è¾“å…¥                                  | è¾“å‡º                                | è¯´æ˜                                        |
| ------------------------------------- | ----------------------------------- | ------------------------------------------- |
| `['a', 'a', 'b', 'b', 'c', 'c', 'c']` | `['a','2','b','2','c','3']`ï¼Œé•¿åº¦ 6 | 'a' å‡ºç° 2 æ¬¡ï¼Œ'b' å‡ºç° 2 æ¬¡ï¼Œ'c' å‡ºç° 3 æ¬¡ |
| `['a']`                               | `['a']`ï¼Œé•¿åº¦ 1                     | å•ä¸ªå­—ç¬¦ç›´æ¥ä¿ç•™                            |

------

## ğŸ“Œ ç®—æ³•å®ç°

### åŒæŒ‡é’ˆè§£æ³•

ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆå®ç°ï¼š

- `read`ï¼šè¯»å–å­—ç¬¦çš„æŒ‡é’ˆã€‚
- `write`ï¼šå†™å…¥ç»“æœçš„æŒ‡é’ˆã€‚

æ ¸å¿ƒé€»è¾‘ï¼š

1. éå† `chars`ï¼Œç»Ÿè®¡æ¯ä¸€ç»„ç›¸åŒå­—ç¬¦çš„ä¸ªæ•° `count`ã€‚
2. å°†å½“å‰å­—ç¬¦å†™å…¥ `chars[write]`ã€‚
3. å¦‚æœ `count > 1`ï¼Œå°† `count` çš„æ¯ä¸€ä½å­—ç¬¦ï¼ˆæ•°å­—ï¼‰å†™å…¥ `chars`ã€‚
4. è¿”å› `write`ï¼Œå³æ–°æ•°ç»„çš„é•¿åº¦ã€‚

### Java ä»£ç å®ç°

```java
public class Solution {
    public int compress(char[] chars) {
        int write = 0; // å†™å…¥æŒ‡é’ˆ
        int read = 0;  // è¯»å–æŒ‡é’ˆ

        while (read < chars.length) {
            char currentChar = chars[read];
            int count = 0;

            // ç»Ÿè®¡å½“å‰å­—ç¬¦çš„è¿ç»­é‡å¤æ¬¡æ•°
            while (read < chars.length && chars[read] == currentChar) {
                read++;
                count++;
            }

            // å†™å…¥å­—ç¬¦
            chars[write++] = currentChar;

            // å†™å…¥å‡ºç°æ¬¡æ•°ï¼ˆå¦‚æœå¤§äº1ï¼‰
            if (count > 1) {
                for (char c : String.valueOf(count).toCharArray()) {
                    chars[write++] = c;
                }
            }
        }

        return write;
    }
}
```

------

## ğŸ“Œ é‡ç‚¹éš¾ç‚¹è§£æ

### âœ… `chars[write++] = currentChar;` çš„å«ä¹‰

è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„å†™æ³•ï¼Œç­‰ä»·äºï¼š

```java
chars[write] = currentChar;
write++;
```

å®ƒçš„å«ä¹‰æ˜¯ï¼š

- **å…ˆä½¿ç”¨ `write` çš„å½“å‰å€¼ä½œä¸ºæ•°ç»„ç´¢å¼•**ï¼Œå†™å…¥ `currentChar`ã€‚
- **å†å¯¹ `write` è¿›è¡Œè‡ªå¢**ï¼Œä¸ºä¸‹ä¸€æ¬¡å†™å…¥åšå‡†å¤‡ã€‚

------

## ğŸ“Œ æ€»ç»“

- ä½¿ç”¨ **åŒæŒ‡é’ˆæ³•**ï¼Œ`read` è¯»æ•°æ®ï¼Œ`write` å†™ç»“æœã€‚
- `write++` çš„å†™æ³•æ˜¯ Java ä¸­å¸¸è§çš„ç®€åŒ–å†™æ³•ã€‚
- æœ¬é¢˜çš„é‡ç‚¹æ˜¯å¦‚ä½•åŸåœ°ä¿®æ”¹æ•°ç»„å¹¶åœ¨ç©ºé—´ä¸Šä¿æŒ O(1)ã€‚
- `String.valueOf(count).toCharArray()` æ˜¯å°†æ•´æ•°è½¬ä¸ºå­—ç¬¦æ•°ç»„çš„å¸¸è§æŠ€å·§ã€‚

------

